{% extends "base.html" %} 
{% load static %} 
{% load crispy_forms_tags %}
{% load data_tags %} 
{% block title %}Search{% endblock title %} 
{% block content %}

<script src="{% static 'js/search.js' %}"></script>


<div class="container">
<div class="row">
  <div class="col-9">
    <form method="get">
      <div class="row">
        <div class="col-sm">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="year" id="1850" value="1850" required>
            <label class="form-check-label" for="1850">
              1850
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="year" id="1901" value="1901">
            <label class="form-check-label" for="1901">
              1901
            </label>
          </div>
        </div>
        <div class="col-sm">
          <input class="form-control" name="q" id="id_q" required readonly>
        </div>
        <div class="col-sm">
          <div class="form-check">
            <input class="form-check-input" type="radio" name="search_category" id="age" value="age">
            <label class="form-check-label" for="age" data-bs-toggle="tooltip" data-bs-placement="right" title="Explain something here">
              Alder
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="search_category" id="city" value="city">
            <label class="form-check-label" for="city" data-bs-toggle="tooltip" data-bs-placement="right" title="Explain something here">
              By
            </label>
          </div>
        </div>
      </div>
    </form>

    <div class="row">
      
      <div class="col-9" id="field-checkboxes">
        {% if page_obj %}


          <script>
            displayFieldCheckboxes("field-checkboxes")
          </script>

        {% else %} 

          <script>
            sessionStorage.clear()
          </script>

        {% endif %}
      </div>
    </div>
    
    <div class="row">
      <div class="col-12" id="results">
        {% if page_obj %}
          <div class="card border-0">
            <div class="card-body">
              <div class="row">
                <h6 class="card-title col-2" name="show-pa-id"> Pa ID</h6>
                <h6 class="card-title col-3" name="show-name">Navn</h6>
                <h6 class="card-title col-1" name="show-age">Alder</h6>
                <h6 class="card-title col-1" name="show-gender">Køn</h6>
                <h6 class="card-title col-3" name="show-status">Ægteskabelig Stilling</h6>
                <h6 class="card-title col-2" name="show-migrant">Migrant-type</h6>
              </div>
            </div>
          </div>
        {% for item in page_obj %}
          <div class="card mb-1">
            <div class="card-body">
              <div class="row">
                  <p class="card-title col-2" name="show-pa-id">{{ item.pa_id }}</p>
                  <p class="card-title col-3" name="show-name">{{ item.navn }}</p>
                  <p class="card-title col-1" name="show-age">{{ item.alder }}</p>
                  <p class="card-title col-1" name="show-gender">{{ item.køn }}</p>
                  <p class="card-title col-3" name="show-status">{{ item.ægteskabelig_stilling }}</p>
                  <p class="card-title col-2" name="show-migrant">{{ item.migrant_type }}</p>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
    
    <!-- not for pagination, but to show number of results in a style consistent with the pagination nav style-->
    <div class="row">
      <div class="col-6">
        <ul class="pagination">
        <li class="page-item disabled">
        <div class="page-link"> Showing {{ page_obj.start_index }}-{{ page_obj.end_index }} of {{ page_obj.paginator.count }} results.</div></liv></ul>
      </div>
      <div class="col-6">
      
        
      
    <!-- pagination starts here -->
    <nav aria-label="Search results pages">
      <ul class="pagination justify-content-end">
        {% if page_obj.has_previous %}
          <li class="page-item"><a class="page-link" href="?{{ parameters }}&page=1">
              First</a></li>
          <li class="page-item"><a class="page-link" href="?{{ parameters }}&page={{ page_obj.previous_page_number }}">Previous</a></li>
        {% endif %}
    
        {% if page_obj %}
          <li class="page-item disabled"><div class="page-link">
              Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.</div>
          </li>
        {% endif %}
    
        {% if page_obj.has_next %}
          <li class="page-item"><a class="page-link" href="?{{ parameters }}&page={{ page_obj.next_page_number }}">Next</a></li>
          <li class="page-item"><a class="page-link" href="?{{ parameters }}&page={{ page_obj.paginator.num_pages }}">Last</a></li>
        {% endif %}
      </ul>
    </nav>
    {% endif %}
  </div>
</div>
    <!-- pagination ends here -->
    <!-- <div class="row border">
      <div class="col">
        <button class="button btn-success btn-lg">
            Pie Chart
        </button>

      </div>
      <div class="col">
        <button type="button" class="btn btn-secondary" data-bs-toggle="tooltip" data-bs-placement="top" title="Tooltip on top, explain what to do here">
          Tooltip on top
        </button>

      </div>
      <div class="col">

      </div>
    </div> -->
  </div>
    <!-- first col-9 ends here -->
  
  <!-- Guide on how to use the page -->  
  <div class="col-3">
    <div class="card" style="width: 18rem;">
      <div class="card-body">
        <h5 class="card-title">Guide</h5>
        <p class="card-text">Explain something here</p>
        <p class="card-text">Explain something more here</p>
        <br>
        <br>
        <br>
        <p class="card-text">Keep explaining</p>
      </div>
    </div>
  </div>
</div>
</div>

<script type="text/javascript">
  
  keepUserInput("{{query}}", "{{year}}", "{{search_category}}");
  
  updateFieldBooleans();

  var toolTipList = getToolTipList()

 
</script>

{% endblock content %}
